<!DOCTYPE html>
<html dir="ltr" lang="en">

  <head>
    <title>Coding Style Guide - Rubinius</title>
  	<meta charset="UTF-8">
  	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <meta content='en' http-equiv='content-language'>
    <meta content='Rubinius is an implementation of the Ruby programming language. The Rubinius bytecode virtual machine is written in C++. The bytecode compiler is written in pure Ruby. The vast majority of the core library is also written in Ruby, with some supporting primitives that interact with the VM directly.' name='description'>
    <link href='/' rel='home'>
    <link href='/' rel='start'>
    <link href='/doc/en/contributing/communication' rel='prev' title='Communication'>
    <link href='/doc/en/ruby'         rel='next' title='Ruby'>
    
    <!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script><![endif]-->
    <script src="/javascripts/jquery-1.3.2.js"></script>
    <script src="/javascripts/paging_keys.js"></script>
    
    <script src="/javascripts/application.js"></script>
    <style>article, aside, dialog, figure, footer, header, hgroup, menu, nav, section { display: block; }</style>

    <link href="/stylesheets/blueprint/screen.css" media="screen" rel="stylesheet" />
    <link href="/stylesheets/application.css"      media="screen" rel="stylesheet" />
    <link href="/stylesheets/blueprint/print.css"  media="print"  rel="stylesheet" />
    <!--[if IE]><link href="/stylesheets/blueprint/ie.css" media="screen" rel="stylesheet" type="text/css" /><![endif]-->
    <!--[if IE]><link href="/stylesheets/ie.css"           media="screen" rel="stylesheet" type="text/css" /><![endif]-->
    <link href="/stylesheets/pygments.css" media="screen" rel="stylesheet" />

    <link href="/favicon.ico"                 rel="shortcut icon"    type="image/vnd.microsoft.icon" />
    <link href="/images/apple-touch-icon.png" rel="apple-touch-icon" type="image/png" />
    <link href="/images/apple-touch-icon.png" rel="apple-touch-icon" type="image/png" sizes="72x72"   />
    <link href="/images/apple-touch-icon.png" rel="apple-touch-icon" type="image/png" sizes="114x114" />
  </head>

  <body>
    <div class='container'>
  <div class='span-21 doc_menu'>
    <header>
      <nav>
  <ul>
    <li><a href="/">Home</a></li>
    <li><a id="blog" href="/blog">Blog</a></li>
    <li><a id="documentation" href="/doc/en">Documentation</a></li>
    <li><a href="/projects">Projects</a></li>
    <li><a href="/roadmap">Roadmap</a></li>
    <li><a href="/releases">Releases</a></li>
  </ul>
</nav>

    </header>
  </div>
  <div class='span-3 last'>
  <div id='version'>
    <a href="/releases/1.2.4">1.2.4</a>
  </div>
</div>

</div>


<div class="container languages">
  <nav>
  <span class="label">Languages:</span>
  <ul>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      >de</a></li>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      class="current"
      
      >en</a></li>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      >es</a></li>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      >fr</a></li>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      >ja</a></li>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      >pl</a></li>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      >pt-br</a></li>
    
    
    
    <li><a href="/doc/fr/contributing/style-guide/"
      
      >ru</a></li>
    
  </ul>
  </nav>
</div>


<div class="container doc_page_nav">
  
    
    <span class="label">Previous:</span>
    <a href="/doc/en/contributing/communication">Communication</a>
    

    <span class="label">Up:</span>
    <a href="/doc/en/">Table of Contents</a>

    
    <span class="label">Next:</span>
    <a href="/doc/en/ruby">Ruby</a>
    
  
</div>


<div class="container documentation">
  <h2>Coding Style Guide</h2>

  

  

    <p>The following guidelines aim to keep the Rubinius codebase maintainable. When
in doubt about a guideline here, ask us in the #rubinius IRC channel on
irc.freenode.net.</p>

<h2 id="all-code">All Code</h2>

<ul>
  <li>Configure your editor for soft tabs, not hard tabs</li>
  <li>Expand tabs to two spaces</li>
  <li>Leave a trailing newline at the end of each file</li>
</ul>

<h2 id="c-code">C++ Code</h2>

<ul>
  <li>
    <p>No space between condition and paren.
  Use <code>if(1)</code> NOT <code>if (1)</code></p>
  </li>
  <li>
    <p>Put the opening brace on the same line as the function declaration or
conditional</p>
  </li>
  <li>
    <p>Always use curly braces, even if they can be left out.</p>
  </li>
  <li>
    <p>Prefer parentheses to implicit precedence rules (within reason)</p>
  </li>
  <li>
    <p>Alternate versions of functions should be named why they are different
from the primary.  If there is a function &lsquo;person()&rsquo; and you want a
version that takes the name of the person, it should be
&lsquo;person_with_name(char *name)&rsquo; or &lsquo;person_with_details(char *name, &hellip;)&rsquo;.
NOT &lsquo;person1(char *name)&rsquo;.</p>
  </li>
</ul>

<h2 id="ruby-code">Ruby Code</h2>

<ul>
  <li>
    <p>Methods: Try to keep your methods short&ndash;one screenful and try to adhere
to DRY within reason. Generally common functionality should be abstracted
to helper methods (which you can make &lsquo;private&rsquo;) but in some cases,
particularly working with Core, sometimes trying to DRY things up is just
an obstacle if you have to maneuver around several different error
conditions, for example.</p>
  </li>
  <li>
    <p>Method names: should be clear, expressive and meaningful. Avoid using
underscores to &lsquo;protect&rsquo; the method (&lsquo;__send__&rsquo;) with some exceptions.</p>
  </li>
  <li>
    <p>Smalltalk-style method names are OK, meaning that you could have a method
<code>SomeClass.make_from</code> when it is intended to be invoked as
<code>SomeClass.make_from file</code> or <code>SomeClass.make_from :file =&gt; name</code>. There
the parameter name <em>completes</em> the method name and makes for more natural
reading.</p>
  </li>
  <li>
    <p>Variable names: make them clear and meaningful (with some well-known
exceptions like using &lsquo;i&rsquo; for a counter.) Try to avoid shadowing method
names, for example within Array use &lsquo;idx&rsquo; in favour of &lsquo;index&rsquo; because the
latter is also a method name.</p>
  </li>
  <li>
    <p>Postconditions: use postconditions only <em>if</em> your expression is a
one-liner <em>and</em> you do not have many conditions.</p>
  </li>
  <li>
    <p>Blocks: Use either <code>do ... end</code> or <code>{...}</code>, spaces between the delimiters
and code (<code>foo { |arg| code }</code>). Split long or complex expressions over
multiple lines like this:</p>

    <pre><code>mapped = foo.map do |elem|
  do_something_with elem
end
</code></pre>
  </li>
  <li>
    <p>Module/Class definitions with scope qualifiers:</p>

    <pre><code>module Rubinius::Profiler
  class Sampler
  end
end
</code></pre>
  </li>
</ul>

<h2 id="kernel-code">Kernel Code</h2>

<p>The primary guideline for all kernel code is simple and efficient. Simple code
is often more efficient and generally more comprehensible. There should be no
metaprogramming code in bootstrap. Use the #attr_xxx methods throughout the
kernel source. Also, alias methods using the #alias_method call next to the
method definition. Specify private methods with the <code>private :sym</code> method next
to the method definition.  Remember that the versions of the methods listed
above in the alpha stage take a single, symbol argument.</p>

<h2 id="documentation">Documentation</h2>

<ul>
  <li>
    <p>Use RDoc for documentation in Ruby code.</p>
  </li>
  <li>
    <p>Use Doxygen for documentation in C++ code.</p>
  </li>
  <li>
    <p>Use Markdown for documentation in the /doc directory. See <a href="http://daringfireball.net/projects/markdown/syntax">Markdown
syntax</a> Set the text
width to 78 characters and use hard breaks.</p>
  </li>
</ul>


</div>

<div class="container doc_page_nav">
  
    
    <span class="label">Previous:</span>
    <a href="/doc/en/contributing/communication">Communication</a>
    

    <span class="label">Up:</span>
    <a href="/doc/en/">Table of Contents</a>

    
    <span class="label">Next:</span>
    <a href="/doc/en/ruby">Ruby</a>
    
  
</div>


<div class="container">
  <div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname  = 'rubinius';
  var disqus_identifier = '/doc/fr/contributing/style-guide/';
  var disqus_url = 'http://rubini.us/doc/fr/contributing/style-guide/';

  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

</div>

<footer>
  <div class='container'>
    <nav>
      <ul>
        <li><a rel="external" href="http://twitter.com/rubinius">Follow Rubinius on Twitter</a></li>
        <li><a rel="external" href="http://github.com/rubinius/rubinius">Fork Rubinius on github</a></li>
        <li><a rel="external" href="http://engineyard.com">An Engine Yard project</a></li>
      </ul>
    </nav>
  </div>
</footer>

<script>
  var _gaq=[['_setAccount','UA-12328521-1'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>


  </body>
</html>
